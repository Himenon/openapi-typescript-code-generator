openapi: 3.1.0
info:
  version: 1.0.0
  title: api.test.domain
  description: Library test schema
  license:
    name: MIT

servers:
  - url: "http://dev.api.test.domain/"
    description: Development Environment
  - url: "https://api.test.domain/"
    description: Production Environment

tags:
  - name: test

components:
  schemas:
    UserId:
      $ref: "./components/schemas/UserId.yml"
    User:
      $ref: "./components/schemas/User.yml"
    ResponseMeta:
      type: object
      required:
        - statusCode
      properties:
        statusCode:
          type: number
    Blog:
      type: object
      properties:
        title:
          type: string
          description: Blog Title
        authorId:
          $ref: "#/components/schemas/UserId"
    BlogId:
      $ref: "./components/schemas/BlogId.yml"
    Favorite:
      $ref: "./components/schemas/Favorite.yml"
    Archives:
      $ref: "./components/schemas/Archives.yml"
    IpAddress:
      type: string
  headers:
    Origin:
      required: true
      description: "request origin url"
      schema:
        type: string
        example: "https://example.com"
    Authorization:
      $ref: "./components/headers/Authorization.yml"
    IPAddress:
      required: true
      description: "Ip Address"
      schema:
        $ref: "#/components/schemas/IpAddress"
  responses:
    SucceededCreatingBlogPost:
      description: "Succeeded in creating a blog post"
      headers:
        X-Rate-Limit:
          description: The number of allowed requests in the current period
          schema:
            type: integer
      content:
        application/json:
          schema:
            type: object
            required:
              - meta
            properties:
              meta:
                $ref: "#/components/schemas/ResponseMeta"
        application/x-www-form-urlencoded:
          schema:
            type: object
            properties:
              meta:
                $ref: "#/components/schemas/ResponseMeta"
    FailedCreatingBlogPost:
      $ref: "./components/responses/FailedCreatingBlogPost.yml"
  parameters:
    BlogId:
      name: slug
      in: path
      schema:
        type: number
        description: Blog Id
      required: true
  requestBodies:
    BlogPost:
      description: "BlogPost"
      content:
        application/json:
          schema:
            type: object
            properties:
              title:
                type: string
                description: Blog title
              body:
                type: string
                description: Blog body
              tags:
                type: array
                items:
                  type: string
                  enum: [javascript, typescript, openapi]
  securitySchemes:
    UserSession:
      type: apiKey
      in: cookie
      name: sessionKey
      scheme: "http"
      openIdConnectUrl: ""
  pathItems:
    BlogCRUD:
      post:
        description: Create Blog
        summary: Create Blog
        operationId: createBlog
        responses:
          "200":
            $ref: "#/components/responses/SucceededCreatingBlogPost"
      delete:
        description: Delete Blog
        summary: Delete Blog
        operationId: deleteBlog
        responses:
          "401":
            $ref: "./components/responses/blog/AuthorizationError.yml"
    CategoryCRUD:
      $ref: "./components/pathItems/CategoryCRUD.yml"

paths:
